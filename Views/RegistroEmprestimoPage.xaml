<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BibliotecaAPP.Views.RegistroEmprestimoPage"
             Title="Registro de Empréstimo"
             BackgroundColor="Transparent"
             NavigationPage.HasNavigationBar="False">

	<Grid>
		<!-- Imagem de fundo -->
		<Image Source="emprestimo.jpg"
               Aspect="AspectFill"
               Opacity="1.0"
               IsOpaque="True" />

		<!-- Camada escura por cima -->
		<BoxView BackgroundColor="#0B1D49"
                 Opacity="0.75"
                 InputTransparent="True" />

		<ScrollView>
			<VerticalStackLayout Padding="30"
                                 Spacing="20"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center">

				<Label Text="Registro de Empréstimo"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />

				<!-- Membro -->
				<VerticalStackLayout Spacing="5">
					<Label Text="Membro" TextColor="White" FontSize="14" />
					<Picker x:Name="ComboBoxMembros"
                            Title="Selecionar Membro"
                            BackgroundColor="White"
                            TextColor="Black"
                            HeightRequest="40" />
				</VerticalStackLayout>

				<!-- Livro e duração -->
				<VerticalStackLayout Spacing="5">
					<Label Text="Livro e Duração" TextColor="White" FontSize="14" />
					<Grid ColumnSpacing="10">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="2*" />
							<ColumnDefinition Width="1*" />
						</Grid.ColumnDefinitions>

						<Picker x:Name="ComboBoxLivros"
                                Grid.Column="0"
                                Title="Selecionar Livro"
                                BackgroundColor="White"
                                TextColor="Black"
                                HeightRequest="40" />

						<Entry x:Name="TextBoxDuracao"
                               Grid.Column="1"
                               Placeholder="Dias"
                               Keyboard="Numeric"
                               BackgroundColor="White"
                               TextColor="Black"
                               HeightRequest="40" />
					</Grid>
				</VerticalStackLayout>

				<!-- Datas -->
				<VerticalStackLayout Spacing="5">
					<Label Text="Datas" TextColor="White" FontSize="14" />
					<Grid ColumnSpacing="10">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="1*" />
							<ColumnDefinition Width="1*" />
						</Grid.ColumnDefinitions>

						<DatePicker x:Name="DatePickerEmprestimo"
                                    Grid.Column="0"
                                    BackgroundColor="White"
                                    TextColor="Black"
                                    HeightRequest="40" />

						<DatePicker x:Name="DatePickerDevolucao"
                                    Grid.Column="1"
                                    BackgroundColor="White"
                                    TextColor="Black"
                                    HeightRequest="40" />
					</Grid>
				</VerticalStackLayout>

				<!-- Adicionar Livro -->
				<Button Text="Adicionar Livro à Lista"
                        Clicked="AdicionarLivro_Click"
                        BackgroundColor="#F97316"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="5"
                        HeightRequest="45" />

				<!-- Lista de livros -->
				<Label Text="Livros Emprestados" TextColor="White" FontAttributes="Bold" />
				<Frame BackgroundColor="White"
                       CornerRadius="5"
                       Padding="10"
                       HasShadow="True"
                       HeightRequest="150">
					<CollectionView x:Name="LivrosCollectionView">
						<CollectionView.ItemTemplate>
							<DataTemplate>
								<Grid Padding="5">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="2*" />
										<ColumnDefinition Width="1*" />
									</Grid.ColumnDefinitions>
									<Label Text="{Binding Livro}" FontAttributes="Bold" TextColor="Black" />
									<Label Text="{Binding Duracao}" Grid.Column="1" HorizontalTextAlignment="End" TextColor="Gray" />
								</Grid>
							</DataTemplate>
						</CollectionView.ItemTemplate>
					</CollectionView>
				</Frame>

				<!-- Botões finais -->
				<Grid ColumnSpacing="10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="1*" />
						<ColumnDefinition Width="1*" />
					</Grid.ColumnDefinitions>

					<Button Grid.Column="0"
                            Text="Confirmar"
                            Clicked="Confirmar_Click"
                            BackgroundColor="#F97316"
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="5"
                            HeightRequest="45" />

					<Button Grid.Column="1"
                            Text="Cancelar"
                            Clicked="Cancelar_Click"
                            BackgroundColor="White"
                            TextColor="Black"
                            BorderColor="Gray"
                            BorderWidth="1"
                            CornerRadius="5"
                            HeightRequest="45" />
				</Grid>

			</VerticalStackLayout>
		</ScrollView>
	</Grid>
</ContentPage>
